いろいろな設定とか

パラメータはすべてsettings.hに記入


使った式

視差(d)とカメラの移動距離(s)の計算
d = W*s / ( 2 * z * tan ( fov / 2)
W : ウィンドウ幅
z : 物体までの奥行き
fov : 視野角(x軸方向)


開口径(D)の計算式
B = D ( 1 - z/ z' ) R
B : 許容錯乱円径(カメラ座標系)
z : 合焦位置までの距離
z': ぼけBまでの距離
R : 倍率 ( f / z )

カメラ座標系からウィンドウ座標系への変換
2f * tan( fov / 2) : B = WinWidth : Max PSF Size
より
B = MPS* 2f tan(fov/2) / WinWidth
よって
D = 2 * R * z * z' * tan(fov/2) / w ( z' -z )

無限遠でぼけが最大になるという仮定をおくと
z' : 無限遠 = z : D
となる


画面上での距離(z)と視差(d)の変換
ウィンドウ幅 : W
基線長 : b
視野角 : fov
とすると

d = ( W*b )/ (2*z*tan(fov/2) )
